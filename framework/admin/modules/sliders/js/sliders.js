jQuery(document).ready(function(b){var a={manager:function(c){if(c){b("#slider_blvd #manage .ajax-mitt").html(c)}else{b.ajax({type:"POST",url:ajaxurl,data:{action:"slider_blvd_update_table"},success:function(d){b("#slider_blvd #manage .ajax-mitt").html(d)}})}},delete_slider:function(e,f,c){var d=b("#manage_sliders").find('input[name="_wpnonce"]').val();tbc_confirm(themeblvd.delete_slider,{confirm:true},function(g){if(g){b.ajax({type:"POST",url:ajaxurl,data:{action:"slider_blvd_delete_slider",security:d,data:e},success:function(h){h=h.split("[(=>)]");b("#slider_blvd #manage").prepend(h[1]);b("#slider_blvd #manage .ajax-update").fadeIn(500,function(){setTimeout(function(){b("#slider_blvd #manage .ajax-update").fadeOut(500,function(){b("#slider_blvd #manage .ajax-update").remove()})},1500)});b("#slider_blvd .displaying-num").text(h[0]);if(f=="submit"){b("#manage_sliders").find('input[name="posts[]"]').each(function(){if(b(this).is(":checked")){var j=b(this).val();if(b("#edit-tab").hasClass(j+"-edit")){b("#edit-tab").hide()}b(this).closest("tr").remove()}})}else{if(f=="click"){var i=e.replace("posts%5B%5D=","");if(b("#edit-tab").hasClass(i+"-edit")){b("#edit-tab").hide()}b("#row-"+i).remove()}}b("#manage_sliders option").removeAttr("checked");if(c=="edit_page"){b("#slider_blvd .group").hide();b("#slider_blvd .group:first").fadeIn();b("#slider_blvd .nav-tab-wrapper a:first").addClass("nav-tab-active")}}})}})},edit:function(c,d){var d=d.split("[(=>)]");b("#slider_blvd .nav-tab-wrapper a.nav-edit-slider").text(themeblvd.edit_slider+": "+c).addClass(d[0]+"-edit");b("#slider_blvd #edit_slider .ajax-mitt").html(d[1]);b("#slider_blvd .slide-element-check input").each(function(){a.elements(b(this))});b("#slider_blvd .slide-set-type select").each(function(){a.type(b(this))});b("#slider_blvd .widget").themeblvd("widgets");b("#sortable").sortable({handle:".widget-name"});b("#slider_blvd .nav-tab-wrapper a").removeClass("nav-tab-active");b("#slider_blvd .nav-tab-wrapper a.nav-edit-slider").show().addClass("nav-tab-active");b("#slider_blvd .group").hide();b("#slider_blvd .group:last").fadeIn()},type:function(d){var g,e=d.closest(".widget-content"),f=d.val(),c=d.closest(".widget-content").find(".slide-position").val();name=d.find('option[value="'+f+'"]').text();e.removeClass("type-image type-video type-custom");e.addClass("type-"+f);d.parent().find("strong").text(name);if(f=="custom"){e.find(".slide-media").hide();e.find(".slide-custom").fadeIn("fast")}else{if(f=="image"){g="video";if(e.find(".slide-elements .element-image_link input").is(":checked")){e.find(".slide-elements .element-image_link").show()}else{e.find(".slide-elements .element-image_link:first").show()}e.find(".slide-elements-warning").hide();e.find(".slide-elements").show()}else{if(f=="video"){g="image";e.find(".slide-elements .element-image_link").hide();if(c=="full"){e.find(".slide-elements").hide();e.find(".slide-elements-warning").show()}else{e.find(".slide-elements-warning").hide();e.find(".slide-elements").show()}}}e.find(".slide-set-media .slide-set-"+g).hide();e.find(".slide-set-media .slide-set-"+f).show();e.find(".slide-custom").hide();e.find(".slide-media").fadeIn("fast")}},position:function(c){if(c.closest(".widget-content").hasClass("type-video")){var e=c.val(),d=c.closest(".widget-content");d.find(".slide-elements .element-image_link").hide();if(e=="full"){d.find(".slide-elements").hide();d.find(".slide-elements-warning").show()}else{d.find(".slide-elements-warning").hide();d.find(".slide-elements").show()}}},elements:function(c){var d=c.closest("tr").next("tr");if(c.is(":checked")){d.show()}else{d.hide()}}};b("#slider_blvd .widget").themeblvd("widgets");b("#slider_blvd .nav-tab-wrapper a.nav-edit-slider").hide();if(typeof(localStorage)!="undefined"){if(localStorage.getItem("activetab")=="#edit"){b("#slider_blvd .group").hide();b("#slider_blvd .group:first").fadeIn();b("#slider_blvd .nav-tab-wrapper a:first").addClass("nav-tab-active")}}b("#slider_blvd .slide-set-type select").live("change",function(){a.type(b(this))});b("#slider_blvd .slide-position").live("change",function(){a.position(b(this))});b("#slider_blvd .slide-element-check input").live("change",function(){a.elements(b(this))});b("#slider_blvd #manage .edit-tb_slider").live("click",function(){var c=b(this).closest("tr").find(".post-title .title-link").text(),d=b(this).attr("href"),d=d.replace("#","");b.ajax({type:"POST",url:ajaxurl,data:{action:"slider_blvd_edit_slider",data:d},success:function(e){a.edit(c,e)}});return false});b("#slider_blvd .row-actions .trash a").live("click",function(){var c=b(this).attr("href"),e=c.replace("#",""),d="posts%5B%5D="+e;a.delete_slider(d,"click");return false});b("#manage_sliders").live("submit",function(){var d=b(this).find('select[name="action"]').val(),c=b(this).serialize();if(d=="trash"){a.delete_slider(c,"submit")}return false});b("#optionsframework #add_new_slider").submit(function(){var e=b(this),g=e.serialize(),f=e.find(".ajax-loading"),c=e.find('input[name="options[slider_name]"]').val(),d=e.find('input[name="_wpnonce"]').val();if(!c){tbc_confirm(themeblvd.no_name,{textOk:"Ok"});return false}b.ajax({type:"POST",url:ajaxurl,data:{action:"slider_blvd_add_slider",security:d,data:g},beforeSend:function(){f.fadeIn("fast")},success:function(h){if(h=="error_type"){tbc_confirm(themeblvd.invalid_slider,{textOk:"Ok"})}else{b("body").animate({scrollTop:0},100,function(){a.edit(c,h);tbc_alert.init(themeblvd.slider_created,"success");e.find('input[name="options[slider_name]"]').val("")});a.manager()}f.hide()}});return false});b("#optionsframework #add_new_slide").live("click",function(){var f=b(this),i,d,c,h,e=f.parent().find(".ajax-overlay"),g=f.parent().find(".ajax-loading");type=f.attr("href"),type=type.replace("#","");b.ajax({type:"POST",url:ajaxurl,data:{action:"slider_blvd_add_slide",data:type},beforeSend:function(){e.fadeIn("fast");g.fadeIn("fast")},success:function(j){d=j.split('<div id="');c=d[1].split('" class="widget slide-options"');h=c[0];b("#slider_blvd #edit #sortable .no-item-yet").remove();b("#slider_blvd #edit #sortable").append(j);b("#"+h+" .slide-set-type select").each(function(){a.type(b(this))});b("#"+h).themeblvd("widgets");b("#"+h).fadeIn();g.fadeOut("fast");e.fadeOut("fast")}});return false});b("#optionsframework #edit_slider").live("submit",function(){var d=b(this),f=d.serialize(),e=d.find(".publishing-action .ajax-loading"),c=d.find('input[name="_wpnonce"]').val();b.ajax({type:"POST",url:ajaxurl,data:{action:"slider_blvd_save_slider",security:c,data:f},beforeSend:function(){e.fadeIn("fast")},success:function(g){g=g.split("[(=>)]");b("#slider_blvd #edit").prepend(g[1]);current_name=b("#slider_blvd #post_title").val();b("#slider_blvd #edit-tab").text(themeblvd.edit_slider+": "+current_name);b("#slider_blvd .postbox-publish h3").text(themeblvd.publish+" "+current_name);b("#slider_blvd .postbox-slider-info #post_name").val(g[0]);b("body").animate({scrollTop:0},50,function(){b("#slider_blvd #edit .ajax-update").fadeIn(500,function(){setTimeout(function(){b("#slider_blvd #edit .ajax-update").fadeOut(500,function(){b("#slider_blvd #edit .ajax-update").remove()})},1500)})});e.fadeOut("fast");a.manager()}});return false});b("#slider_blvd #edit .delete_slider").live("click",function(){var c=b(this).attr("href"),e=c.replace("#",""),d="posts%5B%5D="+e;a.delete_slider(d,"click","edit_page");return false})});